import clsx from "clsx";
import styles from "./avatar.module.scss";
import Image from "next/image";

interface Props {
  size?: number;
  className?: string;
  username: string | number;
  rounded?: boolean;
  title?: string;
}

export function Avatar({ size = 48, ...props }: Props) {
  return (
    <div className={clsx(styles.avatar, props.className)}>
      <Image
        blurDataURL="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjAgMTIwIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9ImF1dG8iPjxtZXRhZGF0YSB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6ZGN0ZXJtcz0iaHR0cDovL3B1cmwub3JnL2RjL3Rlcm1zLyI+PHJkZjpSREY+PHJkZjpEZXNjcmlwdGlvbj48ZGM6dGl0bGU+Qm90dHRzPC9kYzp0aXRsZT48ZGM6Y3JlYXRvcj5QYWJsbyBTdGFubGV5PC9kYzpjcmVhdG9yPjxkYzpzb3VyY2UgeHNpOnR5cGU9ImRjdGVybXM6VVJJIj5odHRwczovL2JvdHR0cy5jb20vPC9kYzpzb3VyY2U+PGRjdGVybXM6bGljZW5zZSB4c2k6dHlwZT0iZGN0ZXJtczpVUkkiPmh0dHBzOi8vYm90dHRzLmNvbS88L2RjdGVybXM6bGljZW5zZT48ZGM6cmlnaHRzPlJlbWl4IG9mIOKAnkJvdHR0c+KAnSAoaHR0cHM6Ly9ib3R0dHMuY29tLykgYnkg4oCeUGFibG8gU3RhbmxleeKAnSwgbGljZW5zZWQgdW5kZXIg4oCeRnJlZSBmb3IgcGVyc29uYWwgYW5kIGNvbW1lcmNpYWwgdXNl4oCdIChodHRwczovL2JvdHR0cy5jb20vKTwvZGM6cmlnaHRzPjwvcmRmOkRlc2NyaXB0aW9uPjwvcmRmOlJERj48L21ldGFkYXRhPjxtYXNrIGlkPSJ2aWV3Ym94TWFzayI+PHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIxMjAiIHJ4PSIwIiByeT0iMCIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiIgLz48L21hc2s+PGcgbWFzaz0idXJsKCN2aWV3Ym94TWFzaykiPjxyZWN0IGZpbGw9IiM1NDZlN2EiIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB4PSIwIiB5PSIwIiAvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyIDY4KSI+PGcgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNiI+PHJlY3QgeD0iMjgiIHk9IjEwIiB3aWR0aD0iNiIgaGVpZ2h0PSIxNCIgcng9IjIiLz48cmVjdCB4PSIxNCIgeT0iMTAiIHdpZHRoPSI2IiBoZWlnaHQ9IjE0IiByeD0iMiIvPjxyZWN0IHg9IjQyIiB5PSIxMCIgd2lkdGg9IjYiIGhlaWdodD0iMTQiIHJ4PSIyIi8+PHJlY3QgeD0iNTYiIHk9IjEwIiB3aWR0aD0iNiIgaGVpZ2h0PSIxNCIgcng9IjIiLz48L2c+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDggMjApIj48cGF0aCBkPSJtMjUgMjcuMiA1LjUgNS41Yy41LjQgMS4yLjQgMS42IDBsMS42LTEuNmMuNC0uNS40LTEuMiAwLTEuNkwyOC4yIDI0bDUuNS01LjVjLjQtLjUuNC0xLjIgMC0xLjZsLTEuNi0xLjZjLS41LS40LTEuMi0uNC0xLjYgMEwyNSAyMC44bC01LjUtNS41Yy0uNS0uNC0xLjItLjQtMS42IDBsLTEuNiAxLjZjLS40LjQtLjQgMS4xIDAgMS42bDUuNSA1LjUtNS41IDUuNWMtLjQuNS0uNCAxLjIgMCAxLjZsMS42IDEuNmMuNS40IDEuMi40IDEuNiAwbDUuNS01LjVaTTc5IDI3LjJsNS41IDUuNWMuNS40IDEuMi40IDEuNiAwbDEuNi0xLjZjLjQtLjUuNC0xLjIgMC0xLjZMODIuMiAyNGw1LjUtNS41Yy40LS41LjQtMS4yIDAtMS42bC0xLjYtMS42Yy0uNS0uNC0xLjItLjQtMS42IDBMNzkgMjAuOGwtNS41LTUuNWMtLjUtLjQtMS4yLS40LTEuNiAwbC0xLjYgMS42Yy0uNC40LS40IDEuMSAwIDEuNmw1LjUgNS41LTUuNSA1LjVjLS40LjUtLjQgMS4yIDAgMS42bDEuNiAxLjZjLjUuNCAxLjIuNCAxLjYgMGw1LjUtNS41WiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuOCIvPjwvZz48L2c+PC9zdmc+"
        priority
        title={props.title}
        width={size}
        height={size}
        quality={100}
        style={{ borderRadius: props.rounded ? size : size / 6 }}
        src={`https://api.dicebear.com/8.x/bottts-neutral/svg?backgroundType=gradientLinear&seed=${props.username}`}
        alt={props.username?.toString()}
      />
    </div>
  );
}
